# –ó–∞–¥–∞–Ω–∏–µ ‚Ññ4
# üìå –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Ç–µ–∫—Å—Ç –≤–∏–¥–∞: ‚Äú1-–π —á–µ—Ç–≤–µ—Ä–≥ –Ω–æ—è–±—Ä—è‚Äù, ‚Äú3-
# —è —Å—Ä–µ–¥–∞ –º–∞—è‚Äù –∏ —Ç.–ø.
# üìå –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –µ–≥–æ –≤ –¥–∞—Ç—É –≤ —Ç–µ–∫—É—â–µ–º –≥–æ–¥—É.
# üìå –õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É.

import re
from datetime import datetime, timedelta
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(filename="errors_4.log",level=logging.ERROR, format='%(asctime)s - %(levelname)s - %(message)s')

def get_date_from_text(text):
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Å—è—Ü—ã –∏ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏
    months = {
        "—è–Ω–≤–∞—Ä—è": 1,
        "—Ñ–µ–≤—Ä–∞–ª—è": 2,
        "–º–∞—Ä—Ç–∞": 3,
        "–∞–ø—Ä–µ–ª—è": 4,
        "–º–∞—è": 5,
        "–∏—é–Ω—è": 6,
        "–∏—é–ª—è": 7,
        "–∞–≤–≥—É—Å—Ç–∞": 8,
        "—Å–µ–Ω—Ç—è–±—Ä—è": 9,
        "–æ–∫—Ç—è–±—Ä—è": 10,
        "–Ω–æ—è–±—Ä—è": 11,
        "–¥–µ–∫–∞–±—Ä—è": 12
    }

    weekdays = {
        "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫": 0,
        "–≤—Ç–æ—Ä–Ω–∏–∫": 1,
        "—Å—Ä–µ–¥–∞": 2,
        "—á–µ—Ç–≤–µ—Ä–≥": 3,
        "–ø—è—Ç–Ω–∏—Ü–∞": 4,
        "—Å—É–±–±–æ—Ç–∞": 5,
        "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ": 6
    }

    # –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞
    pattern = r'(\d+)-–π (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫|–≤—Ç–æ—Ä–Ω–∏–∫|—Å—Ä–µ–¥–∞|—á–µ—Ç–≤–µ—Ä–≥|–ø—è—Ç–Ω–∏—Ü–∞|—Å—É–±–±–æ—Ç–∞|–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ) (—è–Ω–≤–∞—Ä—è|—Ñ–µ–≤—Ä–∞–ª—è|–º–∞—Ä—Ç–∞|–∞–ø—Ä–µ–ª—è|–º–∞—è|–∏—é–Ω—è|–∏—é–ª—è|–∞–≤–≥—É—Å—Ç–∞|—Å–µ–Ω—Ç—è–±—Ä—è|–æ–∫—Ç—è–±—Ä—è|–Ω–æ—è–±—Ä—è|–¥–µ–∫–∞–±—Ä—è)'
    match = re.match(pattern, text)

    if not match:
        logging.error(f"–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: {text}")
        return None

    week_number = int(match.group(1))
    weekday_name = match.group(2)
    month_name = match.group(3)

    # –ü–æ–ª—É—á–∞–µ–º –Ω–æ–º–µ—Ä –º–µ—Å—è—Ü–∞ –∏ –¥–Ω—è –Ω–µ–¥–µ–ª–∏
    month = months[month_name]
    weekday = weekdays[weekday_name]

    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π –≥–æ–¥
    current_year = datetime.now().year

    # –ù–∞—Ö–æ–¥–∏–º –Ω—É–∂–Ω—É—é –¥–∞—Ç—É
    first_day_of_month = datetime(current_year, month, 1)
    days_to_add = (weekday - first_day_of_month.weekday() + 7) % 7
    first_weekday = first_day_of_month + timedelta(days=days_to_add)

    # –ù–∞—Ö–æ–¥–∏–º –Ω—É–∂–Ω—ã–π –ø–æ –ø–æ—Ä—è–¥–∫—É –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
    target_date = first_weekday + timedelta(weeks=week_number - 1)

    return target_date

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
text_input = input("–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ '1-–π —á–µ—Ç–≤–µ—Ä–≥ –Ω–æ—è–±—Ä—è,3-—è —Å—Ä–µ–¥–∞ –º–∞—è' ")
date_result = get_date_from_text(text_input)

if date_result:
    print(f"–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–∞—è –¥–∞—Ç–∞: {date_result.strftime('%Y-%m-%d')}")
